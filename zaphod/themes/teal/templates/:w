<%inherit file="base.html" />

<%namespace name="forms" file="common/forms.html"/>


<%def name="title()">Update Payment Information</%def>


<section class="section-update-payment">
  <div class="container">
    <div class="row">
      <div class="col-md-8 col-md-offset-2">
        <h1>Update Payment Information</h1>

        <p>We've been trying to process the credit card payment for order <strong>${order.id}</strong>, but the payment has been rejected by your bank. In order to ship your pledge rewards, we'll need to process this payment.</p>

        <p>You can enter new payment information, or retry the transaction with the original payment information.</p>

        <p>If you have any questions please don't hesitate to <a href="mailto:support@crowdsupply.com">email us</a> or call us at ${h.our_phone()}.</p>

        ${renderer.begin(class_='form-horizontal form-wrapped', id='update-payment-form', method='POST')}
          ${renderer.hidden('order_id', request.params['order_id'])}
          ${renderer.hidden('timestamp', request.params['timestamp'])}
          ${renderer.hidden('sig', request.params['sig'])}

          <%forms:element renderer="${renderer}" name="cc.use_saved" label=" ">
            <label for="cc-use-saved-yes">
              ${renderer.radio('cc.use_saved', 'yes', checked=True, id='cc-use-saved-yes')}
              Retry card ending in ${masked_card}
            </label>
            <br>
            <label for="cc-use-saved-no">
              ${renderer.radio('cc.use_saved', 'no', checked=False, id='cc-use-saved-no')}
              Enter a new credit card
            </label>
          </%forms:element>

          ## XXX Add credit card and billing fields

          <div class="form-actions">
            ${renderer.submit(None, 'Submit', class_='btn btn-primary')}
          </div>
        ${renderer.end()}
      </div>
    </div>
  </div>
</section>
