<%def name="account_menu()">
  <ul class="nav navbar-nav navbar-right">
    <li class="dropdown">
      <a href="${request.route_path('account')}" class="dropdown-toggle-gravatar" data-toggle="dropdown">
        % if request.user:
          ${h.image_or_gravatar(request, request.user, 'header-avatar', default='mm', title=request.user.name, class_='img-avatar')}
        % else:
          <img class="img-avatar" src="/_teal/images/default-avatar.png" alt="">
        % endif
      </a>
      <ul class="dropdown-menu" role="menu">
        <li><a href="${request.route_path('cart')}">My Cart</a></li>
        <li>
          <a href="${request.route_path('account')}">
            % if request.user:
              ${h.image_or_gravatar(request, request.user, 'header-avatar', default='mm', title=request.user.name, class_='visible-xs img-avatar')}
            % endif
            My Account
          </a>
        </li>
        % if request.user:
          % if request.user.has_permission('admin'):
            <li class="divider"></li>
            <li><a href="${request.route_path('admin:help')}">Help</a></li>
            <li><a href="${request.route_path('admin:dashboard')}">Admin</a></li>
            <li><a href="${request.route_path('styleguide')}">Style Guide</a></li>
            <li><a href="${request.route_path('admin:docs', path='')}">Developer Docs</a></li>
            <li class="divider"></li>
          % endif
          <li><a href="${request.route_path('logout')}">Sign Out</a></li>
        % else:
          <li><a href="${request.route_path('login')}">Log In</a></li>
        % endif
      </ul>
    </li>
  </ul>
</%def>


<%def name="header()">
  <div class="navbar-cs-pad"></div>

  <nav class="navbar navbar-inverse navbar-cs navbar-fixed-top" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-cs-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="${request.route_path('index')}">
          <span class="navbar-logo">Crowd Supply</span>
        </a>
      </div>

      <div class="collapse navbar-collapse navbar-cs-collapse">
        <ul class="nav navbar-nav navbar-left">
          <li><a href="${request.route_path('browse')}">Browse</a></li>
          <li><a href="${request.route_path('launch')}">Create</a></li>
        </ul>

        ${self.account_menu()}

        <form action="${request.route_path('search')}" class="navbar-form navbar-right navbar-form-search" role="search">
          <div class="form-group">
            <input type="text" class="form-control" name="q" placeholder="Search">
          </div>
        </form>

        <ul class="nav navbar-nav navbar-right">
          <li><a href="http://blog.crowdsupply.com">Blog</a></li>
          <li><a href="${request.route_path('about')}">About Us</a></li>
        </ul>

      </div>
    </div>
  </nav>
</%def>
