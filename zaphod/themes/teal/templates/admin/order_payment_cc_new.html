<%inherit file="base.html"/>

<%namespace name="forms" file="/common/forms.html"/>
<%namespace name="blocks" file="/common/blocks.html"/>

<%def name="title()">Add Payment On New CC to Order ${obj.id}</%def>


<section class="section-admin-order">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <h1 class="page-header">${self.title()}</h1>

        ${renderer.begin(id='update-form', class_='form-horizontal form-wrapped')}
          ${forms.ltext(renderer, 'amount', obj.unauthorized_amount, prefix='$')}

          <div class="credit-card-fields">
            <%forms:element renderer="${renderer}" name="cc.number" label="Card Number">
              <div class="row">
                <div class="col-sm-6">
                  ${renderer.text('cc.number', class_='form-control js-ccfield')}
                </div>
                <div class="col-sm-6">
                  ${blocks.credit_card_icons()}
                </div>
              </div>
            </%forms:element>

            <%forms:element renderer="${renderer}" names="${['cc.expires_month', 'cc.expires_year']}" label="Expiration">
              <div class="row">
                <div class="col-xs-6 col-sm-3">
                  ${h.cc_expires_month_select(renderer, 'cc.expires_month', class_='form-control')}
                </div>
                <div class="col-xs-6 col-sm-3">
                  ${h.cc_expires_year_select(renderer, 'cc.expires_year', class_='form-control')}
                </div>
              </div>
            </%forms:element>
            <%forms:element renderer="${renderer}" name="cc.code" label="CVV Code">
              <div class="row">
                <div class="col-sm-4 col-xs-9">
                  ${renderer.text('cc.code', class_='form-control')}
                </div>
              </div>
            </%forms:element>

            ${forms.lcheckbox(renderer, 'cc.save', checked=True, label='Save credit card information for future use')}

            <div class="billing-fields">
              ${forms.address_fields(renderer, 'cc.billing', obj.shipping)}
            </div>
          </div>

          <%forms:actions>
            <button class="btn btn-primary" type="submit">Process Payment</button>
            <a class="btn btn-default" href="${request.route_path('admin:order', id=obj.id)}">Cancel</a>
          </%forms:actions>
        ${renderer.end()}
      </div>
    </div>
  </div>
</section>
